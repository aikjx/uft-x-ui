<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»Ÿä¸€åœºè®º - å‚ç›´åŸç†çš„å®‡å®™ä¹‹ç¾</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.3); }
            50% { box-shadow: 0 0 40px rgba(0, 212, 255, 0.6); }
        }
        
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', -apple-system, sans-serif;
            background: radial-gradient(ellipse at center, #0a0e1a 0%, #000000 100%);
            color: #fff;
            overflow: hidden;
            position: relative;
        }
        
        #container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        
        /* ä¸»æ§åˆ¶é¢æ¿ - ä¼˜åŒ–ç‰ˆ */
        .main-panel {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 10;
            background: linear-gradient(135deg, 
                rgba(10, 14, 26, 0.95) 0%, 
                rgba(20, 24, 36, 0.92) 50%,
                rgba(10, 14, 26, 0.95) 100%);
            padding: 20px;
            border-radius: 20px;
            border: 2px solid transparent;
            background-clip: padding-box;
            max-width: 420px;
            max-height: 96vh;
            overflow-y: auto;
            backdrop-filter: blur(30px) saturate(180%);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.9),
                0 0 60px rgba(0, 212, 255, 0.15),
                inset 0 1px 1px rgba(255, 255, 255, 0.1);
            animation: glow 3s ease-in-out infinite;
        }
        
        .main-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 20px;
            padding: 2px;
            background: linear-gradient(135deg, #00d4ff, #7b2ff7, #f107a3);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.6;
            z-index: -1;
        }
        
        .main-panel::-webkit-scrollbar {
            width: 6px;
        }
        
        .main-panel::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 3px;
        }
        
        .main-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00d4ff, #7b2ff7, #f107a3);
            border-radius: 3px;
        }
        
        h1 {
            font-size: 1.8em;
            margin-bottom: 5px;
            background: linear-gradient(120deg, 
                #00d4ff 0%, 
                #7b2ff7 30%, 
                #f107a3 60%,
                #00d4ff 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
            letter-spacing: 1px;
            animation: shimmer 3s linear infinite;
            filter: drop-shadow(0 0 20px rgba(0, 212, 255, 0.5));
        }
        
        .subtitle {
            font-size: 0.8em;
            color: #888;
            margin-bottom: 16px;
            font-style: italic;
            line-height: 1.4;
            opacity: 0.9;
        }
        
        /* æ¨¡å¼é€‰æ‹©å™¨ - ä¼˜åŒ–ç‰ˆ */
        .mode-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 18px;
        }
        
        .mode-btn {
            padding: 12px 8px;
            background: rgba(0, 212, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.25);
            border-radius: 10px;
            color: #aaa;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.85em;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .mode-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(0, 212, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .mode-btn:hover::before {
            width: 200px;
            height: 200px;
        }
        
        .mode-btn:hover {
            background: rgba(0, 212, 255, 0.15);
            border-color: rgba(0, 212, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }
        
        .mode-btn.active {
            background: linear-gradient(135deg, 
                rgba(0, 212, 255, 0.3), 
                rgba(123, 47, 247, 0.3));
            border-color: #00d4ff;
            color: #00d4ff;
            font-weight: bold;
            box-shadow: 
                0 0 20px rgba(0, 212, 255, 0.5),
                inset 0 1px 1px rgba(255, 255, 255, 0.2);
        }
        
        /* ç« èŠ‚ - ä¼˜åŒ–ç‰ˆ */
        .section {
            margin: 14px 0;
            padding: 16px;
            background: linear-gradient(135deg,
                rgba(0, 212, 255, 0.03) 0%,
                rgba(123, 47, 247, 0.02) 100%);
            border-radius: 12px;
            border-left: 4px solid;
            transition: all 0.3s ease;
        }
        
        .section:hover {
            background: linear-gradient(135deg,
                rgba(0, 212, 255, 0.08) 0%,
                rgba(123, 47, 247, 0.05) 100%);
            transform: translateX(3px);
        }
        
        .section.geo { 
            border-color: #00d4ff;
            box-shadow: -4px 0 20px rgba(0, 212, 255, 0.15);
        }
        .section.force { 
            border-color: #7b2ff7;
            box-shadow: -4px 0 20px rgba(123, 47, 247, 0.15);
        }
        .section.control { 
            border-color: #f107a3;
            box-shadow: -4px 0 20px rgba(241, 7, 163, 0.15);
        }
        .section.formula { 
            border-color: #ffd93d;
            box-shadow: -4px 0 20px rgba(255, 217, 61, 0.15);
        }
        
        .section h3 {
            font-size: 0.98em;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #00d4ff;
            font-weight: 600;
        }
        
        .section.force h3 { color: #7b2ff7; }
        .section.control h3 { color: #f107a3; }
        .section.formula h3 { color: #ffd93d; }
        
        /* åŠ›ç±»å‹å¡ç‰‡ - ä¼˜åŒ–ç‰ˆ */
        .force-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            margin: 8px 0;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .force-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: linear-gradient(180deg, transparent, currentColor, transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .force-card:hover::before {
            opacity: 1;
        }
        
        .force-card:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: rgba(0, 212, 255, 0.4);
            transform: translateX(5px) scale(1.02);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.2);
        }
        
        .force-card.active {
            background: linear-gradient(90deg, 
                rgba(0, 212, 255, 0.2), 
                rgba(123, 47, 247, 0.15));
            border-color: #00d4ff;
            box-shadow: 
                0 0 15px rgba(0, 212, 255, 0.3),
                inset 0 1px 1px rgba(255, 255, 255, 0.1);
        }
        
        .force-info {
            flex: 1;
        }
        
        .force-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }
        
        .force-icon {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            animation: float 3s ease-in-out infinite;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .force-name {
            font-size: 0.92em;
            font-weight: 600;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .force-origin {
            font-size: 0.72em;
            color: #999;
            margin-left: 44px;
            line-height: 1.4;
        }
        
        .force-direction {
            font-size: 0.7em;
            color: #00d4ff;
            margin-left: 44px;
            margin-top: 3px;
            font-weight: 500;
        }
        
        /* å¼€å…³ - ä¼˜åŒ–ç‰ˆ */
        .toggle-switch {
            width: 46px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .toggle-switch.active {
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            box-shadow: 
                inset 0 1px 2px rgba(255, 255, 255, 0.3),
                0 0 15px rgba(0, 212, 255, 0.5);
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #ffffff, #f0f0f0);
            border-radius: 50%;
            top: 3px;
            left: 3px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
        }
        
        .toggle-switch.active::after {
            left: 25px;
            box-shadow: 0 2px 8px rgba(0, 212, 255, 0.6);
        }
        
        /* å…¬å¼æ˜¾ç¤º - ä¼˜åŒ–ç‰ˆ */
        .formula-box {
            background: linear-gradient(135deg,
                rgba(0, 0, 0, 0.6) 0%,
                rgba(20, 20, 30, 0.5) 100%);
            padding: 12px;
            border-radius: 8px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.82em;
            color: #ffd93d;
            margin: 10px 0;
            border: 1px solid rgba(255, 217, 61, 0.3);
            line-height: 1.7;
            box-shadow: 
                0 4px 15px rgba(0, 0, 0, 0.3),
                inset 0 1px 1px rgba(255, 217, 61, 0.1);
            transition: all 0.3s;
        }
        
        .formula-box:hover {
            border-color: rgba(255, 217, 61, 0.6);
            box-shadow: 
                0 6px 20px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(255, 217, 61, 0.2);
        }
        
        /* æ»‘å—ç»„ - ä¼˜åŒ–ç‰ˆ */
        .slider-group {
            margin: 12px 0;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            color: #bbb;
            font-size: 0.82em;
            margin-bottom: 8px;
        }
        
        .slider-label span {
            color: #00d4ff;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }
        
        input[type="range"] {
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, 
                rgba(123, 47, 247, 0.3), 
                rgba(0, 212, 255, 0.3));
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, #00d4ff, #7b2ff7);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 
                0 0 8px rgba(0, 212, 255, 0.8),
                0 2px 6px rgba(0, 0, 0, 0.3);
            transition: all 0.2s;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.3);
            box-shadow: 
                0 0 20px rgba(0, 212, 255, 1),
                0 4px 10px rgba(0, 0, 0, 0.4);
        }
        
        input[type="range"]::-webkit-slider-thumb:active {
            transform: scale(1.1);
        }
        
        /* æŒ‰é’®ç½‘æ ¼ - ä¼˜åŒ–ç‰ˆ */
        .btn-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 12px;
        }
        
        button {
            padding: 11px;
            background: linear-gradient(135deg, #7b2ff7 0%, #f107a3 100%);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 0.82em;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(123, 47, 247, 0.3);
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        button:hover::before {
            width: 250px;
            height: 250px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(123, 47, 247, 0.6);
        }
        
        button:active {
            transform: translateY(-1px);
        }
        
        /* ä¿¡æ¯æ¡† - ä¼˜åŒ–ç‰ˆ */
        .info-box {
            margin-top: 14px;
            padding: 12px;
            background: linear-gradient(135deg, 
                rgba(0, 212, 255, 0.1), 
                rgba(123, 47, 247, 0.08));
            border-radius: 10px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            font-size: 0.76em;
            line-height: 1.6;
            color: #ccc;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .info-box strong {
            color: #00d4ff;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }
        
        /* å›¾ä¾‹ - ä¼˜åŒ–ç‰ˆ */
        .legend {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: linear-gradient(135deg,
                rgba(10, 14, 26, 0.95) 0%,
                rgba(20, 24, 36, 0.92) 100%);
            padding: 14px;
            border-radius: 12px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            font-size: 0.8em;
            backdrop-filter: blur(25px) saturate(180%);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.8),
                0 0 40px rgba(0, 212, 255, 0.1);
        }
        
        .legend-title {
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 0.95em;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 6px 0;
            transition: all 0.3s;
        }
        
        .legend-item:hover {
            transform: translateX(3px);
        }
        
        .legend-line {
            width: 30px;
            height: 3px;
            border-radius: 2px;
            box-shadow: 0 0 10px currentColor;
        }
        
        /* ç»Ÿè®¡é¢æ¿ - ä¼˜åŒ–ç‰ˆ */
        .stats-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg,
                rgba(10, 14, 26, 0.95) 0%,
                rgba(20, 24, 36, 0.92) 100%);
            padding: 14px;
            border-radius: 12px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            backdrop-filter: blur(25px) saturate(180%);
            min-width: 160px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.8),
                0 0 40px rgba(0, 212, 255, 0.1);
        }
        
        .stats-title {
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 0.9em;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 6px 0;
            color: #aaa;
            font-size: 0.8em;
        }
        
        .stat-value {
            color: #00d4ff;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(0, 212, 255, 0.5);
        }
        
        /* ç†è®ºé¢æ¿ - ä¼˜åŒ–ç‰ˆ */
        .theory-panel {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: linear-gradient(135deg,
                rgba(10, 14, 26, 0.95) 0%,
                rgba(30, 24, 16, 0.92) 100%);
            padding: 14px;
            border-radius: 12px;
            border: 1px solid rgba(255, 217, 61, 0.3);
            backdrop-filter: blur(25px) saturate(180%);
            max-width: 330px;
            font-size: 0.76em;
            line-height: 1.6;
            color: #ccc;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.8),
                0 0 40px rgba(255, 217, 61, 0.1);
        }
        
        .theory-title {
            color: #ffd93d;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.05em;
            text-shadow: 0 0 10px rgba(255, 217, 61, 0.5);
        }
    </style>
</head>
<body>
    <div id="container"></div>
    
    <!-- ä¸»æ§åˆ¶é¢æ¿ -->
    <div class="main-panel">
        <h1>ç»Ÿä¸€åœºè®º</h1>
        <div class="subtitle">ä»å‚ç›´åŸç†åˆ°å››ç§åŸºæœ¬åŠ›çš„å‡ ä½•ç»Ÿä¸€</div>
        
        <!-- æ¨¡å¼é€‰æ‹© -->
        <div class="mode-selector">
            <div class="mode-btn active" data-mode="unified">ğŸŒŒ ç»Ÿä¸€</div>
            <div class="mode-btn" data-mode="separate">ğŸ”¬ åˆ†è§£</div>
            <div class="mode-btn" data-mode="comparison">âš–ï¸ å¯¹æ¯”</div>
            <div class="mode-btn" data-mode="evolution">ğŸ¬ æ¼”åŒ–</div>
        </div>
        
        <!-- å‡ ä½•åŸºç¡€ -->
        <div class="section geo">
            <h3>âš›ï¸ å‚ç›´åŸç†ä¸èºæ—‹è¿åŠ¨</h3>
            <div class="slider-group">
                <div class="slider-label"><span>èºæ—‹åŠå¾„ r</span> <span id="radiusVal">3.5</span></div>
                <input type="range" id="radius" min="2" max="7" step="0.5" value="3.5">
            </div>
            <div class="slider-group">
                <div class="slider-label"><span>è§’é€Ÿåº¦ Ï‰</span> <span id="omegaVal">1.0</span></div>
                <input type="range" id="omega" min="0.2" max="3" step="0.1" value="1">
            </div>
            <div class="slider-group">
                <div class="slider-label"><span>èºè· h</span> <span id="pitchVal">0.6</span></div>
                <input type="range" id="pitch" min="0.2" max="1.5" step="0.1" value="0.6">
            </div>
            <div class="slider-group">
                <div class="slider-label"><span>èºæ—‹åœˆæ•°</span> <span id="turnsVal">5</span></div>
                <input type="range" id="turns" min="3" max="12" value="5">
            </div>
        </div>
        
        <!-- å››ç§åŸºæœ¬åŠ› -->
        <div class="section force">
            <h3>ğŸ’« å››ç§åŸºæœ¬åŠ›å±•ç¤º</h3>
            
            <!-- å¼•åŠ› -->
            <div class="force-card active" data-force="gravity">
                <div class="force-info">
                    <div class="force-header">
                        <div class="force-icon" style="background: linear-gradient(135deg, #ff6b6b, #ee5a6f);">ğŸŒ</div>
                        <div class="force-name">å¼•åŠ›/æƒ¯æ€§åŠ›</div>
                    </div>
                    <div class="force-origin">æºè‡ªï¼šç›´çº¿è¿åŠ¨åˆ†é‡é€Ÿåº¦å˜åŒ– (dV/dt)</div>
                    <div class="force-direction">â†’ æ–¹å‘ï¼šæŒ‡å‘è´¨é‡ä¸­å¿ƒæˆ–åŠ é€Ÿåº¦åå‘</div>
                </div>
                <div class="toggle-switch active"></div>
            </div>
            
            <!-- ç”µåœºåŠ› -->
            <div class="force-card active" data-force="electric">
                <div class="force-info">
                    <div class="force-header">
                        <div class="force-icon" style="background: linear-gradient(135deg, #ffd93d, #f6c23e);">âš¡</div>
                        <div class="force-name">ç”µåœºåŠ›</div>
                    </div>
                    <div class="force-origin">æºè‡ªï¼šç›´çº¿è¿åŠ¨æµé‡å˜åŒ– (dm/dt)</div>
                    <div class="force-direction">â†’ æ–¹å‘ï¼šæ²¿ç”µè·è¿çº¿ï¼ŒåŒæ–¥å¼‚å¸</div>
                </div>
                <div class="toggle-switch active"></div>
            </div>
            
            <!-- ç£åœºåŠ› -->
            <div class="force-card active" data-force="magnetic">
                <div class="force-info">
                    <div class="force-header">
                        <div class="force-icon" style="background: linear-gradient(135deg, #4d94ff, #3a7bd5);">ğŸ§²</div>
                        <div class="force-name">ç£åœºåŠ›</div>
                    </div>
                    <div class="force-origin">æºè‡ªï¼šæ—‹è½¬è¿åŠ¨åˆ†é‡å˜åŒ– (-VÂ·dm/dt)</div>
                    <div class="force-direction">â†’ æ–¹å‘ï¼šå‚ç›´äºé€Ÿåº¦ä¸ç£åœºå¹³é¢</div>
                </div>
                <div class="toggle-switch active"></div>
            </div>
            
            <!-- æ ¸åŠ› -->
            <div class="force-card active" data-force="nuclear">
                <div class="force-info">
                    <div class="force-header">
                        <div class="force-icon" style="background: linear-gradient(135deg, #a78bfa, #8b5cf6);">â˜¢ï¸</div>
                        <div class="force-name">æ ¸åŠ›</div>
                    </div>
                    <div class="force-origin">æºè‡ªï¼šå…‰é€ŸçŸ¢é‡æ–¹å‘å‰§çƒˆå˜åŒ– (dC/dt)</div>
                    <div class="force-direction">â†’ æ–¹å‘ï¼šçŸ­ç¨‹æŸç¼šï¼Œæå¼ºå¤æ‚</div>
                </div>
                <div class="toggle-switch active"></div>
            </div>
        </div>
        
        <!-- ç»Ÿä¸€å…¬å¼ -->
        <div class="section formula">
            <h3>ğŸ“ å®‡å®™å¤§ç»Ÿä¸€æ–¹ç¨‹</h3>
            <div class="formula-box">
F = CÂ·dm/dt - VÂ·dm/dt + mÂ·dC/dt - mÂ·dV/dt
            </div>
            <div style="font-size: 0.7em; color: #888; margin-top: 6px;">
                ç”µåœºåŠ› + ç£åœºåŠ› + æ ¸åŠ› + å¼•åŠ›/æƒ¯æ€§åŠ›
            </div>
        </div>
        
        <!-- æ§åˆ¶é€‰é¡¹ -->
        <div class="section control">
            <h3>ğŸ® è§†è§‰æ§åˆ¶</h3>
            <div class="slider-group">
                <div class="slider-label"><span>ç²’å­æ•°é‡</span> <span id="particlesVal">10</span></div>
                <input type="range" id="particles" min="5" max="20" value="10">
            </div>
            <div class="slider-group">
                <div class="slider-label"><span>å‘é‡é•¿åº¦</span> <span id="vectorLenVal">1.2</span></div>
                <input type="range" id="vectorLen" min="0.5" max="2.5" step="0.1" value="1.2">
            </div>
            <div class="slider-group">
                <div class="slider-label"><span>ç³»ç»Ÿé€Ÿåº¦</span> <span id="speedVal">1.0</span></div>
                <input type="range" id="speed" min="0" max="3" step="0.1" value="1">
            </div>
            <div class="btn-grid">
                <button id="toggleVectors">å‘é‡ ON</button>
                <button id="toggleTrails">è½¨è¿¹ ON</button>
                <button id="toggleAxes">åæ ‡è½´ ON</button>
                <button id="resetView">é‡ç½®è§†è§’</button>
            </div>
        </div>
        
        <div class="info-box">
            <strong>ğŸ”¬ ç»Ÿä¸€åœºè®ºæ ¸å¿ƒï¼š</strong><br>
            å‚ç›´åŸç†è¦æ±‚ç©ºé—´ä»¥ä¸‰ç»´èºæ—‹æ–¹å¼è¿åŠ¨ã€‚å››ç§åŸºæœ¬åŠ›çš„æ–¹å‘ï¼Œæœ¬è´¨ä¸Šæ˜¯è¿™ç§èºæ—‹è¿åŠ¨åœ¨ä¸åŒæ–¹é¢å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸ºç»´æŒ"ä¸‰ç»´å‚ç›´"è€Œè¡¨ç°å‡ºçš„å‡ ä½•æ•ˆåº”ã€‚
        </div>
    </div>
    
    <!-- å›¾ä¾‹ -->
    <div class="legend">
        <div class="legend-title">åŠ›åœºå‘é‡å›¾ä¾‹</div>
        <div class="legend-item">
            <div class="legend-line" style="background: #ff6b6b;"></div>
            <span>å¼•åŠ›åœºï¼ˆæŒ‡å‘ä¸­å¿ƒï¼‰</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #ffd93d;"></div>
            <span>ç”µåœºï¼ˆå¾„å‘å‘æ•£/æ±‡èšï¼‰</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #4d94ff;"></div>
            <span>ç£åœºï¼ˆå‚ç›´å¹³é¢ï¼‰</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #a78bfa;"></div>
            <span>æ ¸åŠ›åœºï¼ˆå¤æ‚æ–¹å‘ï¼‰</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #00d4ff;"></div>
            <span>èºæ—‹è½¨è¿¹</span>
        </div>
    </div>
    
    <!-- ç»Ÿè®¡é¢æ¿ -->
    <div class="stats-panel">
        <div class="stats-title">ç³»ç»ŸçŠ¶æ€</div>
        <div class="stat-item">
            <span>FPS</span>
            <span class="stat-value" id="fps">60</span>
        </div>
        <div class="stat-item">
            <span>ç²’å­æ•°</span>
            <span class="stat-value" id="particleCount">0</span>
        </div>
        <div class="stat-item">
            <span>åŠ›å‘é‡</span>
            <span class="stat-value" id="vectorCount">0</span>
        </div>
        <div class="stat-item">
            <span>å¯¹è±¡æ•°</span>
            <span class="stat-value" id="objectCount">0</span>
        </div>
    </div>
    
    <!-- ç†è®ºé¢æ¿ -->
    <div class="theory-panel">
        <div class="theory-title">ç»Ÿä¸€æ¨¡å¼</div>
        <div id="theoryContent">
å±•ç¤ºå®Œæ•´çš„ä¸‰ç»´èºæ—‹è¿åŠ¨åŠå…¶åˆ†è§£å‡ºçš„å››ç§åŸºæœ¬åŠ›ã€‚æ¯ä¸ªç²’å­æ²¿èºæ—‹è½¨è¿¹è¿åŠ¨ï¼ŒåŒæ—¶æ˜¾ç¤ºå››ç§åŠ›å‘é‡çš„æ–¹å‘å…³ç³»ã€‚è¿™æ˜¯å‚ç›´åŸç†æœ€ç›´æ¥çš„å‡ ä½•ä½“ç°ã€‚
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // ============ å…¨å±€å˜é‡ ============
        let scene, camera, renderer;
        let spiralGroup;
        let particles = [];
        let forceVectors = { gravity: [], electric: [], magnetic: [], nuclear: [] };
        
        // çŠ¶æ€ç®¡ç†
        const state = {
            mode: 'unified',
            showVectors: true,
            showTrails: true,
            showAxes: true,
            forces: {
                gravity: true,
                electric: true,
                magnetic: true,
                nuclear: true
            }
        };
        
        // é…ç½®å‚æ•°
        const config = {
            radius: 3.5,
            omega: 1.0,
            pitch: 0.6,
            turns: 5,
            particleCount: 10,
            vectorLength: 1.2,
            speed: 1.0
        };
        
        // ç›¸æœºæ§åˆ¶
        let mouseX = 0, mouseY = 0;
        let targetRotX = 0.3, targetRotY = 0.2;
        let currentRotX = 0.3, currentRotY = 0.2;
        
        // æ€§èƒ½ç›‘æ§
        let frameCount = 0;
        let lastFpsTime = 0;
        let animTime = 0;
        
        // ============ åˆå§‹åŒ– ============
        function init() {
            try {
                // åœºæ™¯è®¾ç½®
                scene = new THREE.Scene();
                scene.fog = new THREE.FogExp2(0x000000, 0.008);
                
                // ç›¸æœºè®¾ç½®
                camera = new THREE.PerspectiveCamera(
                    60,
                    window.innerWidth / window.innerHeight,
                    0.1,
                    1000
                );
                camera.position.set(20, 15, 25);
                camera.lookAt(0, 0, 0);
                
                // æ¸²æŸ“å™¨è®¾ç½®
                renderer = new THREE.WebGLRenderer({
                    antialias: true,
                    alpha: true,
                    powerPreference: "high-performance"
                });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                renderer.setClearColor(0x000000, 1);
                document.getElementById('container').appendChild(renderer.domElement);
                
                // å…‰ç…§ç³»ç»Ÿ
                setupLights();
                
                // åˆ›å»ºæ˜Ÿç©º
                createStarfield();
                
                // åˆ›å»ºåæ ‡è½´
                createAxes();
                
                // åˆ›å»ºèºæ—‹ç³»ç»Ÿ
                spiralGroup = new THREE.Group();
                scene.add(spiralGroup);
                createSpiralSystem();
                
                // äº‹ä»¶ç›‘å¬
                setupControls();
                window.addEventListener('resize', onResize, false);
                document.addEventListener('mousemove', onMouseMove, false);
                document.addEventListener('wheel', onWheel, { passive: true });
                
                // å¼€å§‹åŠ¨ç”»
                lastFpsTime = performance.now();
                animate();
                
            } catch (error) {
                console.error('åˆå§‹åŒ–é”™è¯¯:', error);
            }
        }
        
        // ============ å…‰ç…§ç³»ç»Ÿ ============
        function setupLights() {
            const ambientLight = new THREE.AmbientLight(0x1a1a2e, 0.6);
            scene.add(ambientLight);
            
            const light1 = new THREE.PointLight(0x00d4ff, 1.5, 150);
            light1.position.set(20, 20, 20);
            scene.add(light1);
            
            const light2 = new THREE.PointLight(0x7b2ff7, 1.3, 150);
            light2.position.set(-20, -15, -20);
            scene.add(light2);
            
            const light3 = new THREE.PointLight(0xf107a3, 1.0, 120);
            light3.position.set(0, -20, 15);
            scene.add(light3);
        }
        
        // ============ æ˜Ÿç©ºèƒŒæ™¯ ============
        function createStarfield() {
            const geometry = new THREE.BufferGeometry();
            const vertices = [];
            const colors = [];
            
            for (let i = 0; i < 5000; i++) {
                vertices.push(
                    (Math.random() - 0.5) * 200,
                    (Math.random() - 0.5) * 200,
                    (Math.random() - 0.5) * 200
                );
                
                const color = new THREE.Color();
                color.setHSL(Math.random() * 0.2 + 0.5, 0.6, 0.5 + Math.random() * 0.3);
                colors.push(color.r, color.g, color.b);
            }
            
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
            geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
            
            const material = new THREE.PointsMaterial({
                size: 0.3,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                blending: THREE.AdditiveBlending
            });
            
            const starField = new THREE.Points(geometry, material);
            scene.add(starField);
        }
        
        // ============ åæ ‡è½´ç³»ç»Ÿ ============
        function createAxes() {
            const axesGroup = new THREE.Group();
            axesGroup.name = 'axes';
            const length = 18;
            
            const axisData = [
                { color: 0xff6b6b, dir: [1, 0, 0] },
                { color: 0x6bff6b, dir: [0, 1, 0] },
                { color: 0x6b6bff, dir: [0, 0, 1] }
            ];
            
            axisData.forEach(axis => {
                const material = new THREE.LineBasicMaterial({
                    color: axis.color,
                    transparent: true,
                    opacity: 0.5
                });
                
                // æ­£æ–¹å‘
                const posPoints = [
                    new THREE.Vector3(0, 0, 0),
                    new THREE.Vector3(axis.dir[0] * length, axis.dir[1] * length, axis.dir[2] * length)
                ];
                const posGeometry = new THREE.BufferGeometry().setFromPoints(posPoints);
                const posLine = new THREE.Line(posGeometry, material);
                axesGroup.add(posLine);
                
                // è´Ÿæ–¹å‘
                const negPoints = [
                    new THREE.Vector3(0, 0, 0),
                    new THREE.Vector3(-axis.dir[0] * length, -axis.dir[1] * length, -axis.dir[2] * length)
                ];
                const negGeometry = new THREE.BufferGeometry().setFromPoints(negPoints);
                const negLine = new THREE.Line(negGeometry, material);
                axesGroup.add(negLine);
            });
            
            scene.add(axesGroup);
        }
        
        // ============ åˆ›å»ºèºæ—‹ç³»ç»Ÿ ============
        function createSpiralSystem() {
            // æ¸…é™¤æ—§ç³»ç»Ÿ
            spiralGroup.clear();
            particles = [];
            forceVectors = { gravity: [], electric: [], magnetic: [], nuclear: [] };
            
            // åˆ›å»ºèºæ—‹çº¿
            const points = [];
            const segments = 300;
            for (let i = 0; i <= segments; i++) {
                const t = (i / segments) * config.turns * Math.PI * 2;
                const x = config.radius * Math.cos(t);
                const y = config.pitch * t - config.turns * Math.PI * config.pitch;
                const z = config.radius * Math.sin(t);
                points.push(new THREE.Vector3(x, y, z));
            }
            
            const spiralGeometry = new THREE.BufferGeometry().setFromPoints(points);
            const spiralMaterial = new THREE.LineBasicMaterial({
                color: 0x00d4ff,
                transparent: true,
                opacity: 0.5
            });
            const spiralLine = new THREE.Line(spiralGeometry, spiralMaterial);
            spiralGroup.add(spiralLine);
            
            // åˆ›å»ºç²’å­
            for (let i = 0; i < config.particleCount; i++) {
                const particle = {
                    progress: i / config.particleCount,
                    mesh: null,
                    trailPoints: [],
                    trail: null
                };
                
                // ç²’å­çƒ
                const sphereGeom = new THREE.SphereGeometry(0.18, 16, 16);
                const sphereMat = new THREE.MeshPhongMaterial({
                    color: 0x00d4ff,
                    emissive: 0x0088cc,
                    shininess: 100,
                    transparent: true,
                    opacity: 0.95
                });
                particle.mesh = new THREE.Mesh(sphereGeom, sphereMat);
                spiralGroup.add(particle.mesh);
                
                // è½¨è¿¹
                const trailGeom = new THREE.BufferGeometry();
                const trailMat = new THREE.LineBasicMaterial({
                    color: 0x00d4ff,
                    transparent: true,
                    opacity: 0.4
                });
                particle.trail = new THREE.Line(trailGeom, trailMat);
                spiralGroup.add(particle.trail);
                
                // åŠ›å‘é‡
                const forceTypes = [
                    { name: 'gravity', color: 0xff6b6b },
                    { name: 'electric', color: 0xffd93d },
                    { name: 'magnetic', color: 0x4d94ff },
                    { name: 'nuclear', color: 0xa78bfa }
                ];
                
                forceTypes.forEach(force => {
                    const vectorGeom = new THREE.BufferGeometry();
                    const positions = new Float32Array(6);
                    vectorGeom.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                    const vectorMat = new THREE.LineBasicMaterial({
                        color: force.color,
                        transparent: true,
                        opacity: 0.8
                    });
                    const vector = new THREE.Line(vectorGeom, vectorMat);
                    spiralGroup.add(vector);
                    
                    if (!forceVectors[force.name]) forceVectors[force.name] = [];
                    forceVectors[force.name].push(vector);
                });
                
                particles.push(particle);
            }
            
            updateStats();
        }
        
        // ============ æ›´æ–°ç²’å­ ============
        function updateParticles() {
            particles.forEach((p, idx) => {
                const t = (p.progress + animTime * 0.0003 * config.speed) % 1;
                const angle = t * config.turns * Math.PI * 2 * config.omega;
                
                const x = config.radius * Math.cos(angle);
                const y = config.pitch * angle - config.turns * Math.PI * config.pitch;
                const z = config.radius * Math.sin(angle);
                
                p.mesh.position.set(x, y, z);
                
                // è½¨è¿¹
                if (state.showTrails) {
                    p.trailPoints.push(new THREE.Vector3(x, y, z));
                    if (p.trailPoints.length > 60) p.trailPoints.shift();
                    p.trail.geometry.setFromPoints(p.trailPoints);
                    p.trail.visible = true;
                } else {
                    p.trail.visible = false;
                }
                
                // åŠ›å‘é‡æ›´æ–°
                if (state.showVectors) {
                    const vecLen = config.vectorLength;
                    
                    // 1. å¼•åŠ›å‘é‡ - æŒ‡å‘ä¸­å¿ƒ (F = -mÂ·dV/dt)
                    if (state.forces.gravity && forceVectors.gravity[idx]) {
                        const gravDir = new THREE.Vector3(-x, -y, -z).normalize().multiplyScalar(vecLen);
                        const pos = forceVectors.gravity[idx].geometry.attributes.position.array;
                        pos[0] = x; pos[1] = y; pos[2] = z;
                        pos[3] = x + gravDir.x; pos[4] = y + gravDir.y; pos[5] = z + gravDir.z;
                        forceVectors.gravity[idx].geometry.attributes.position.needsUpdate = true;
                        forceVectors.gravity[idx].visible = true;
                    } else if (forceVectors.gravity[idx]) {
                        forceVectors.gravity[idx].visible = false;
                    }
                    
                    // 2. ç”µåœºå‘é‡ - å¾„å‘å‘æ•£ (F = CÂ·dm/dt)
                    if (state.forces.electric && forceVectors.electric[idx]) {
                        const elecDir = new THREE.Vector3(x, 0, z).normalize().multiplyScalar(vecLen);
                        const pos = forceVectors.electric[idx].geometry.attributes.position.array;
                        pos[0] = x; pos[1] = y; pos[2] = z;
                        pos[3] = x + elecDir.x; pos[4] = y + elecDir.y; pos[5] = z + elecDir.z;
                        forceVectors.electric[idx].geometry.attributes.position.needsUpdate = true;
                        forceVectors.electric[idx].visible = true;
                    } else if (forceVectors.electric[idx]) {
                        forceVectors.electric[idx].visible = false;
                    }
                    
                    // 3. ç£åœºå‘é‡ - å‚ç›´äºè¿åŠ¨å¹³é¢ (F = -VÂ·dm/dt)
                    if (state.forces.magnetic && forceVectors.magnetic[idx]) {
                        const tangent = new THREE.Vector3(-Math.sin(angle), 0, Math.cos(angle)).normalize();
                        const radial = new THREE.Vector3(Math.cos(angle), 0, Math.sin(angle)).normalize();
                        const magDir = new THREE.Vector3().crossVectors(tangent, radial).normalize().multiplyScalar(vecLen);
                        const pos = forceVectors.magnetic[idx].geometry.attributes.position.array;
                        pos[0] = x; pos[1] = y; pos[2] = z;
                        pos[3] = x + magDir.x; pos[4] = y + magDir.y; pos[5] = z + magDir.z;
                        forceVectors.magnetic[idx].geometry.attributes.position.needsUpdate = true;
                        forceVectors.magnetic[idx].visible = true;
                    } else if (forceVectors.magnetic[idx]) {
                        forceVectors.magnetic[idx].visible = false;
                    }
                    
                    // 4. æ ¸åŠ›å‘é‡ - å¤æ‚æ–¹å‘ (F = mÂ·dC/dt)
                    if (state.forces.nuclear && forceVectors.nuclear[idx]) {
                        const nucDir = new THREE.Vector3(
                            Math.sin(angle * 3 + animTime * 0.001),
                            Math.cos(angle * 2 - animTime * 0.0008),
                            Math.sin(angle * 5 + animTime * 0.0012)
                        ).normalize().multiplyScalar(vecLen * 0.75);
                        const pos = forceVectors.nuclear[idx].geometry.attributes.position.array;
                        pos[0] = x; pos[1] = y; pos[2] = z;
                        pos[3] = x + nucDir.x; pos[4] = y + nucDir.y; pos[5] = z + nucDir.z;
                        forceVectors.nuclear[idx].geometry.attributes.position.needsUpdate = true;
                        forceVectors.nuclear[idx].visible = true;
                    } else if (forceVectors.nuclear[idx]) {
                        forceVectors.nuclear[idx].visible = false;
                    }
                } else {
                    Object.values(forceVectors).forEach(vectors => {
                        vectors.forEach(v => v.visible = false);
                    });
                }
            });
        }
        
        // ============ åŠ¨ç”»å¾ªç¯ ============
        function animate() {
            requestAnimationFrame(animate);
            
            const now = performance.now();
            animTime = now;
            
            // FPSè®¡æ•°
            frameCount++;
            if (now - lastFpsTime >= 1000) {
                document.getElementById('fps').textContent = frameCount;
                frameCount = 0;
                lastFpsTime = now;
            }
            
            // æ›´æ–°ç²’å­
            updateParticles();
            
            // æ—‹è½¬èºæ—‹
            if (config.speed > 0) {
                spiralGroup.rotation.y += 0.002 * config.speed;
            }
            
            // ç›¸æœºå¹³æ»‘ç§»åŠ¨
            currentRotX += (targetRotX - currentRotX) * 0.05;
            currentRotY += (targetRotY - currentRotY) * 0.05;
            
            const radius = 32;
            camera.position.x = radius * Math.sin(currentRotX) * Math.cos(currentRotY);
            camera.position.z = radius * Math.cos(currentRotX) * Math.cos(currentRotY);
            camera.position.y = radius * Math.sin(currentRotY);
            camera.lookAt(0, 0, 0);
            
            renderer.render(scene, camera);
        }
        
        // ============ æ§åˆ¶è®¾ç½® ============
        function setupControls() {
            // æ¨¡å¼åˆ‡æ¢
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    state.mode = btn.dataset.mode;
                    updateModeDisplay();
                });
            });
            
            // æ»‘å—æ§åˆ¶
            const sliders = {
                radius: { id: 'radius', display: 'radiusVal', prop: 'radius', rebuild: true },
                omega: { id: 'omega', display: 'omegaVal', prop: 'omega', rebuild: false },
                pitch: { id: 'pitch', display: 'pitchVal', prop: 'pitch', rebuild: true },
                turns: { id: 'turns', display: 'turnsVal', prop: 'turns', rebuild: true },
                particles: { id: 'particles', display: 'particlesVal', prop: 'particleCount', rebuild: true },
                vectorLen: { id: 'vectorLen', display: 'vectorLenVal', prop: 'vectorLength', rebuild: false },
                speed: { id: 'speed', display: 'speedVal', prop: 'speed', rebuild: false }
            };
            
            Object.values(sliders).forEach(slider => {
                const elem = document.getElementById(slider.id);
                if (elem) {
                    elem.addEventListener('input', (e) => {
                        const val = parseFloat(e.target.value);
                        config[slider.prop] = val;
                        const display = document.getElementById(slider.display);
                        if (display) display.textContent = val.toFixed(1);
                        if (slider.rebuild) createSpiralSystem();
                    });
                }
            });
            
            // åŠ›ç±»å‹åˆ‡æ¢
            document.querySelectorAll('.force-card').forEach(card => {
                card.addEventListener('click', () => {
                    const force = card.dataset.force;
                    state.forces[force] = !state.forces[force];
                    card.classList.toggle('active');
                    const toggle = card.querySelector('.toggle-switch');
                    if (toggle) toggle.classList.toggle('active');
                    updateStats();
                });
            });
            
            // æŒ‰é’®æ§åˆ¶
            const toggleVectorsBtn = document.getElementById('toggleVectors');
            if (toggleVectorsBtn) {
                toggleVectorsBtn.addEventListener('click', function() {
                    state.showVectors = !state.showVectors;
                    this.textContent = state.showVectors ? 'å‘é‡ ON' : 'å‘é‡ OFF';
                });
            }
            
            const toggleTrailsBtn = document.getElementById('toggleTrails');
            if (toggleTrailsBtn) {
                toggleTrailsBtn.addEventListener('click', function() {
                    state.showTrails = !state.showTrails;
                    this.textContent = state.showTrails ? 'è½¨è¿¹ ON' : 'è½¨è¿¹ OFF';
                    if (!state.showTrails) particles.forEach(p => p.trailPoints = []);
                });
            }
            
            const toggleAxesBtn = document.getElementById('toggleAxes');
            if (toggleAxesBtn) {
                toggleAxesBtn.addEventListener('click', function() {
                    state.showAxes = !state.showAxes;
                    const axes = scene.getObjectByName('axes');
                    if (axes) axes.visible = state.showAxes;
                    this.textContent = state.showAxes ? 'åæ ‡è½´ ON' : 'åæ ‡è½´ OFF';
                });
            }
            
            const resetViewBtn = document.getElementById('resetView');
            if (resetViewBtn) {
                resetViewBtn.addEventListener('click', () => {
                    targetRotX = 0.3;
                    targetRotY = 0.2;
                    currentRotX = 0.3;
                    currentRotY = 0.2;
                });
            }
        }
        
        // ============ æ›´æ–°æ¨¡å¼æ˜¾ç¤º ============
        function updateModeDisplay() {
            const theoryContent = document.getElementById('theoryContent');
            const theoryTitle = document.querySelector('.theory-title');
            
            if (!theoryContent || !theoryTitle) return;
            
            const modes = {
                unified: {
                    title: 'ç»Ÿä¸€æ¨¡å¼',
                    content: 'å±•ç¤ºå®Œæ•´çš„ä¸‰ç»´èºæ—‹è¿åŠ¨åŠå…¶åˆ†è§£å‡ºçš„å››ç§åŸºæœ¬åŠ›ã€‚æ¯ä¸ªç²’å­æ²¿èºæ—‹è½¨è¿¹è¿åŠ¨ï¼ŒåŒæ—¶æ˜¾ç¤ºå››ç§åŠ›å‘é‡çš„æ–¹å‘å…³ç³»ã€‚è¿™æ˜¯å‚ç›´åŸç†æœ€ç›´æ¥çš„å‡ ä½•ä½“ç°ã€‚'
                },
                separate: {
                    title: 'åˆ†è§£æ¨¡å¼',
                    content: 'å°†èºæ—‹è¿åŠ¨åˆ†è§£ä¸ºç›´çº¿è¿åŠ¨åˆ†é‡å’Œæ—‹è½¬è¿åŠ¨åˆ†é‡ã€‚å¼•åŠ›å’Œç”µåœºåŠ›æºäºç›´çº¿åˆ†é‡ï¼Œç£åœºåŠ›æºäºæ—‹è½¬åˆ†é‡ï¼Œæ ¸åŠ›æºäºå…‰é€ŸçŸ¢é‡æ–¹å‘å˜åŒ–ã€‚'
                },
                comparison: {
                    title: 'å¯¹æ¯”æ¨¡å¼',
                    content: 'å¯¹æ¯”å››ç§åŠ›çš„æ–¹å‘ç‰¹å¾ï¼šå¼•åŠ›æŒ‡å‘ä¸­å¿ƒï¼Œç”µåœºæ²¿å¾„å‘ï¼Œç£åœºå‚ç›´å¹³é¢ï¼Œæ ¸åŠ›å¤æ‚å¤šå˜ã€‚æ­ç¤ºåŠ›çš„æ–¹å‘æ˜¯å‡ ä½•è¿åŠ¨å˜åŒ–çš„å¿…ç„¶ç»“æœã€‚'
                },
                evolution: {
                    title: 'æ¼”åŒ–æ¨¡å¼',
                    content: 'åŠ¨æ€å±•ç¤ºä»å‚ç›´åŸç†â†’èºæ—‹è¿åŠ¨â†’è¿åŠ¨å˜åŒ–â†’åŠ›çš„äº§ç”Ÿçš„å®Œæ•´æ¼”åŒ–è¿‡ç¨‹ã€‚ç†è§£åŠ›ä¸æ˜¯è¶…è·ä½œç”¨ï¼Œè€Œæ˜¯ç©ºé—´å‡ ä½•çŠ¶æ€å˜åŒ–çš„è¡¨ç°ã€‚'
                }
            };
            
            const mode = modes[state.mode];
            theoryTitle.textContent = mode.title;
            theoryContent.textContent = mode.content;
        }
        
        // ============ æ›´æ–°ç»Ÿè®¡ ============
        function updateStats() {
            const particleCountElem = document.getElementById('particleCount');
            if (particleCountElem) particleCountElem.textContent = particles.length;
            
            const vectorCount = Object.values(state.forces).filter(v => v).length * particles.length;
            const vectorCountElem = document.getElementById('vectorCount');
            if (vectorCountElem) vectorCountElem.textContent = vectorCount;
            
            let objectCount = 0;
            scene.traverse(() => objectCount++);
            const objectCountElem = document.getElementById('objectCount');
            if (objectCountElem) objectCountElem.textContent = objectCount;
        }
        
        // ============ äº‹ä»¶å¤„ç† ============
        function onMouseMove(e) {
            const x = (e.clientX / window.innerWidth) * 2 - 1;
            const y = -(e.clientY / window.innerHeight) * 2 + 1;
            targetRotX = x * Math.PI * 0.8 + 0.3;
            targetRotY = y * 0.4 + 0.2;
        }
        
        function onWheel(e) {
            const delta = e.deltaY * 0.02;
            const newDist = camera.position.length() + delta;
            const clampedDist = Math.max(15, Math.min(60, newDist));
            const ratio = clampedDist / camera.position.length();
            camera.position.multiplyScalar(ratio);
        }
        
        function onResize() {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        }
        
        // ============ å¯åŠ¨åº”ç”¨ ============
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>